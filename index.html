<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>Your Studio | Visual Stories</title>

    <!-- Tailwind (Play CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Showdown only needed on blog.html, not here -->
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
      crossorigin
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg0: #0d0d0d;
        --bg1: #131313;
        --bg2: #1a1a1a;
        --text: #f5f5f5;
        --muted: #b9b9b9;
        --line: rgba(255, 255, 255, 0.12);
        --card: rgba(255, 255, 255, 0.04);
        --accent: #ff6600;
      }
      html,
      body {
        height: 100%;
      }
      body {
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto,
          Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        background: linear-gradient(180deg, var(--bg0), var(--bg2));
        color: var(--text);
      }
      .pill {
        border: 2px solid #fff;
        border-radius: 9999px;
        padding: 0.35rem 0.8rem;
        line-height: 1;
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        background: #000;
      }
      .pill svg {
        width: 1rem;
        height: 1rem;
      }
      .logo-bubble {
        display: inline-block;
        padding: 0.45rem 0.9rem;
        border: 3px solid #fff;
        border-radius: 0.85rem;
        background: #000;
        box-shadow: 0 4px 0 #fff, 0 0 0 6px #000;
        font-weight: 800;
        letter-spacing: 0.5px;
      }
      .search {
        border: 2px solid #fff;
        border-radius: 9999px;
        background: #000;
      }
      .search input {
        background: transparent;
        outline: none;
        color: var(--text);
      }
      .story-tile {
        border-radius: 0.75rem;
        overflow: hidden;
        background: var(--card);
        border: 1px solid var(--line);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .story-tile:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.45),
          0 0 0 2px rgba(255, 102, 0, 0.35) inset;
      }
      .tile-color {
        height: 420px;
        display: grid;
        place-items: center;
      }
      .tile-frame {
        background: #fff;
        border-radius: 0.5rem;
        padding: 0.35rem;
        max-width: 82%;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
      }
      .tile-frame img {
        display: block;
        width: 100%;
        height: 260px;
        object-fit: cover;
        border-radius: 0.35rem;
      }
      .eyebrow {
        color: var(--muted);
        font-size: 0.8rem;
        letter-spacing: 0.04em;
      }
      .badge {
        position: absolute;
        top: 0.85rem;
        left: 0.85rem;
        background: #000;
        border: 2px solid #fff;
        border-radius: 9999px;
        padding: 0.15rem 0.5rem;
        font-weight: 700;
        font-size: 0.8rem;
      }
      .month {
        position: absolute;
        top: 0.85rem;
        right: 0.85rem;
        background: #000;
        border: 2px solid #fff;
        border-radius: 9999px;
        padding: 0.15rem 0.6rem;
        font-weight: 700;
        font-size: 0.8rem;
      }
      .accent-link {
        color: var(--accent);
      }
      .accent-ring:focus-visible {
        outline: 3px solid var(--accent);
        outline-offset: 2px;
      }
    </style>
  </head>

  <body>
    <!-- Top header row -->
    <header class="w-full">
      <div
        class="mx-auto max-w-6xl px-6 pt-6 flex items-center justify-between"
      >
        <div class="text-sm text-neutral-300">
          A studio that explores light and data with visual stories.
        </div>

        <nav class="hidden md:flex items-center gap-3">
          <a class="pill accent-ring" href="#about">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="white"
              stroke-width="2"
            >
              <path d="M12 12c2.8 0 5-2.2 5-5S14.8 2 12 2 7 4.2 7 7s2.2 5 5 5Zm0 2c-4 0-8 2-8 6v2h16v-2c0-4-4-6-8-6Z" />
            </svg>
            About
          </a>
          <a class="pill accent-ring" href="#subscribe">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="white"
              stroke-width="2"
            >
              <path d="M3 4h18v14H3z" />
              <path d="M3 8h18M7 20h10" />
            </svg>
            Subscribe
          </a>
          <a class="pill accent-ring" href="#more">
            <svg
              viewBox="0 0 24 24"
              fill="white"
              stroke="white"
              stroke-width="0"
            >
              <circle cx="5" cy="12" r="2" />
              <circle cx="12" cy="12" r="2" />
              <circle cx="19" cy="12" r="2" />
            </svg>
            More
          </a>
        </nav>
      </div>

      <!-- Logo + search -->
      <div class="mx-auto max-w-6xl px-6 mt-6 grid grid-cols-1 gap-6">
        <div class="flex items-center justify-center">
          <a class="logo-bubble text-2xl" href="./">YOUR STUDIO</a>
        </div>

        <div
          class="flex items-center justify-between flex-wrap gap-4 md:gap-6"
        >
          <form
            class="search flex items-center gap-3 px-4 py-2 w-full md:w-[340px]"
            role="search"
            onsubmit="event.preventDefault();"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="white"
              stroke-width="2"
              class="shrink-0"
              width="18"
              height="18"
            >
              <circle cx="11" cy="11" r="7" />
              <path d="m21 21-3.8-3.8" />
            </svg>
            <input
              id="search"
              class="w-full placeholder-neutral-400"
              type="text"
              placeholder="Find a story..."
              aria-label="Find a story"
            />
          </form>

          <div
            class="flex items-center gap-6 text-sm text-neutral-200 flex-wrap"
          >
            <span class="flex items-center gap-2">
              <svg viewBox="0 0 24 24" fill="white" width="18" height="18">
                <path
                  d="M12 21s-7-4.4-7-10a4 4 0 0 1 7-2 4 4 0 0 1 7 2c0 5.6-7 10-7 10Z"
                />
              </svg>
              Our faves
            </span>
            <span class="flex items-center gap-2">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="white"
                stroke-width="2"
                width="18"
                height="18"
              >
                <path d="M13 2 3 14h7l1 8 10-12h-7l-1-8Z" />
              </svg>
              Popular
            </span>
            <span class="flex items-center gap-2">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="white"
                stroke-width="2"
                width="18"
                height="18"
              >
                <path d="M21 12a9 9 0 1 1-9-9" />
                <path d="M21 3v6h-6" />
              </svg>
              Updating
            </span>
            <span class="flex items-center gap-2">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="white"
                stroke-width="2"
                width="18"
                height="18"
              >
                <path d="M12 19v-6M8 19V5m8 14v-9" />
              </svg>
              Your input
            </span>
            <span class="flex items-center gap-2">
              <svg viewBox="0 0 24 24" fill="white" width="18" height="18">
                <path d="M3 5h18v10H3z" />
                <path d="m10 9 4 3-4 3V9Z" fill="#000" />
              </svg>
              Video
            </span>
            <span class="flex items-center gap-2">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="white"
                stroke-width="2"
                width="18"
                height="18"
              >
                <path d="M9 18V6l12-2v12l-12 2Z" />
                <path d="M3 6v12" />
              </svg>
              Audio
            </span>
          </div>
        </div>
      </div>
    </header>

    <!-- Stories grid -->
    <main class="mx-auto max-w-6xl px-6 mt-10 pb-24">
      <section id="stories" class="grid gap-10 md:grid-cols-2 lg:grid-cols-3">
        <!-- Tiles injected by JS -->
      </section>

      <div class="mt-12 text-center">
        <button
          id="loadMore"
          class="pill accent-ring"
          type="button"
          aria-label="Load more stories"
        >
          Load more
        </button>
      </div>
    </main>

    <footer class="border-t border-[color:var(--line)]/20">
      <div
        class="mx-auto max-w-6xl px-6 py-10 text-sm text-neutral-400 flex
        items-center justify-between flex-wrap gap-4"
      >
        <div>© 2025 Your Studio — built with GitHub Pages</div>
        <div>
          Inspired by great visual essays across the web. Not affiliated with
          any third party.
        </div>
      </div>
    </footer>

    <script>
      const POSTS_JSON = "blog/posts.json";
      const GRID = document.getElementById("stories");
      const SEARCH = document.getElementById("search");
      const LOAD_MORE = document.getElementById("loadMore");

      let allPosts = [];
      let filtered = [];
      let shown = 0;
      const PAGE_SIZE = 9;

      const fmtMonth = (iso) =>
        new Date(iso).toLocaleString(undefined, {
          month: "short",
        });
      const fmtYear = (iso) =>
        new Date(iso).toLocaleString(undefined, { year: "numeric" });

      function tile(post) {
        const m = fmtMonth(post.date).toUpperCase();
        const y = fmtYear(post.date);
        const bg = post.tileColor || "#222";
        const issue = post.issue ? `#${post.issue}` : "";
        const href = `blog.html?p=${encodeURIComponent(post.slug)}`;

        return `
        <article class="story-tile">
          <a href="${href}" class="block relative" aria-label="${post.title}">
            <span class="badge">${issue}</span>
            <span class="month">${m} ${y}</span>

            <div class="tile-color" style="background:${bg}">
              <div class="tile-frame">
                <img src="${post.cover}" alt="${post.title} cover" />
              </div>
            </div>
          </a>

          <div class="p-5">
            <h3 class="text-2xl font-extrabold leading-tight">
              <a class="accent-link" href="${href}">${post.title}</a>
            </h3>
            <p class="mt-2 text-neutral-300">${post.excerpt}</p>
          </div>
        </article>
      `;
      }

      function render(reset = false) {
        if (reset) {
          GRID.innerHTML = "";
          shown = 0;
        }
        const next = filtered.slice(shown, shown + PAGE_SIZE);
        GRID.insertAdjacentHTML(
          "beforeend",
          next.map((p) => tile(p)).join("")
        );
        shown += next.length;
        LOAD_MORE.style.display =
          shown >= filtered.length ? "none" : "inline-flex";
      }

      function doFilter() {
        const q = (SEARCH.value || "").toLowerCase().trim();
        filtered = allPosts.filter((p) => {
          const inText =
            p.title.toLowerCase().includes(q) ||
            p.excerpt.toLowerCase().includes(q) ||
            (p.tags || []).join(" ").toLowerCase().includes(q);
          return inText;
        });
        render(true);
      }

      async function init() {
        const res = await fetch(POSTS_JSON);
        const data = await res.json();
        allPosts = data.posts
          .slice()
          .sort(
            (a, b) =>
              new Date(b.date).getTime() - new Date(a.date).getTime()
          );
        filtered = allPosts;
        render(true);
      }

      SEARCH.addEventListener("input", () => doFilter());
      LOAD_MORE.addEventListener("click", () => render(false));

      init();
    </script>
  </body>
</html>